---
layout: post
title: How to run sudo apt-get update through proxy in Shell/Terminal/CommandLine
date: 2015-10-20 12:49:21.000000000 -02:00
type: post
published: true
status: publish
categories: []
tags: []
meta:
  cwp_bar_icon: ''
  option_overall_score: '0'
  _edit_last: '1'
  cwp_rev_product_name: ''
  cwp_rev_price: ''
  cwp_meta_box_check: 'No'
  cwp_image_link: image
  cwp_product_affiliate_text: ''
  cwp_product_affiliate_link: ''
  cwp_product_affiliate_text2: ''
  cwp_product_affiliate_link2: ''
  option_1_content: ''
  option_1_grade: ''
  option_2_content: ''
  option_2_grade: ''
  option_3_content: ''
  option_3_grade: ''
  option_4_content: ''
  option_4_grade: ''
  option_5_content: ''
  option_5_grade: ''
  cwp_rev_product_image: ''
  cwp_option_1_pro: ''
  cwp_option_1_cons: ''
  cwp_option_2_pro: ''
  cwp_option_2_cons: ''
  cwp_option_3_pro: ''
  cwp_option_3_cons: ''
  cwp_option_4_pro: ''
  cwp_option_4_cons: ''
  cwp_option_5_pro: ''
  cwp_option_5_cons: ''
author:
  login: admin
  email: me@andrealmar.com
  display_name: Andre Almar
  first_name: Andre
  last_name: Almar
---
<p>I was struggling with this because I was configuring my http_proxy, https_proxy and ftp_proxy using <em>export</em> but when I was doing <em>sudo apt-get udpate</em>, nothing happened. Did some research on StackOverflow and found the solution. So I'm keeping the solution here for future reference. This problem happens because in some releases <em>sudo</em> is configured in such a way that all environment variables all cleared when running the command.</p>
<p>My proxy don't have authentication so I did:</p>
<pre class="lang:sh decode:true ">export http_proxy="http://proxy.servername:port/"</pre>
<pre class="lang:sh decode:true">export https_proxy="http://proxy.servername:port/"</pre>
<pre class="lang:sh decode:true ">export ftp_proxy="http://proxy.servername:port/"</pre>
<p>After that I did:</p>
<pre class="lang:sh decode:true ">visudo</pre>
<p>There is a line that states:</p>
<pre class="lang:default decode:true ">Defaults env_reset</pre>
<p>After that line just add:</p>
<pre class="lang:default decode:true ">Defaults env_keep = "http_proxy https_proxy ftp_proxy"</pre>
<p>Voil√°. Things will start working now.</p>
